## 三国演义文档

#### 一、程序目的

找出说话次数最多的那一个人。

#### 二、主要思想。

1. 首先根据《三国演义》的主要人物可以将搜索范围定在刘备、关羽、张飞、诸葛亮、曹操、孙权以及司马懿；
2. 由于文章中说话方式有很多种，故先找出类似于“XXX曰”的形式并建立字典再放入其中；
3. 将文章中前引号替换为等于号（"——>=），句号替换为加号（。——>+）。再使用正则表达式中的先行断言与后行断言就其中的内容隔离出来。并找出距离”=“最近的一个上述人物的字（刘备、关羽、张飞、诸葛亮、曹操、孙权以及司马懿）。再在字典中对应的键值+1。
4. 最后对字典使用sort函数求出值最大的一位。

#### 三、引用库。

1. import jieba。

   ```python
   import jieba
   ```

   对文段进行切割。

2. import re。

   ```python
   import re
   ```

   使得可以只用正则表达式。

#### 四、相关的库函数。

1. jieba.cut 与 jieba.lcut

   cut与lcut的内容都是按照大致的中文意思来的，对一个单独的字或词来进行切割。

   jieba.cut生成的是一个生成器，需转换为列表形式才能输出；而jieba.lcut则直接生成为列表的形式。
   
   ![1649127041360](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\1649127041360.png)



2. get函数的应用

   ```python
   dic.get(key[word, value]) + 1
   ```

   如果dic字典中有word的话，就对该word对应的值加1；反之，则会在字典中生成"word": value的键值对。

3. lambda和sort

- lambda和普通的函数相比，就是省去了函数名称而已，同时这样的匿名函数，又不能共享在别的地方调用。 

-  ```python
      # 原
      def f(x):
      	return x**2
      print f(4)
      # 使用lambda
      g = lambda x : x**2
      print g(4)
      ```

      - sort() 函数用于对原列表进行排序，如果指定参数，则使用比较函数指定的比较函数。 

-  ```python
      # 对dic列表中的元组第一个元素进行降序排列
      dic.sort(key= lambda x:x[1], reverse = True)  
      ```


4. replace()函数

    Python replace() 方法把字符串中的 old（旧字符串） 替换成 new(新字符串)，如果指定第三个参数max，则替换不超过 max 次。 

   ```python
str.replace(old, new[?, max])
   ```
   
   - old -- 将被替换的子字符串。
   - new -- 新字符串，用于替换old子字符串。
   - max -- 可选字符串, 替换不超过 max 次。

#### 五、程序部分

##### 1.  s1

```python
def s1():
    dic = {}
    file = open('三国演义（原）.txt', 'r', encoding='utf-8')
    for word in jieba.lcut(para.strip(), cut_all=True):
        # # 对3字词进行筛选
        if len(word) == 3:
            dic[word] = dic.get(word, 0) + 1
        if word == "关羽曰" or word == "美髯曰" or word == "武圣曰" or word == "壮缪曰" or word == "云长曰":
            word = "关羽曰"
            dic[word] = dic.get(word, 0) + 1
        if word == "张飞曰" or word == "益德曰" or word == "飞曰" or word == "翼德曰":
            word = "张飞曰"
            dic[word] = dic.get(word, 0) + 1
        if word == "孙权曰" or word == "权曰":
            word = "孙权曰"
            dic[word] = dic.get(word, 0) + 1
        if word == "玄德曰" or word == "德曰" or word == "备曰" or word == "刘备曰":
            word = "刘备曰"
            dic[word] = dic.get(word, 0) + 1
        if word == "诸葛曰" or word == "孔明曰" or word == "诸葛亮曰" or word == "卧龙曰":
            word = "诸葛曰"
            dic[word] = dic.get(word, 0) + 1
        if word == "司马曰":
            word = "司马曰"
            dic[word] = dic.get(word, 0) + 1
    file.close()
```

函数目的：找出所有"XXX曰“的形式。

##### 2. s2

```python
def s2():
       b[] = [0]
    jd = 0
    file = open('三国演义（原）.txt', 'r', encoding='utf-8')
    s = file.readlines()
    s = str(s)
    para = re.sub('([。！？\?])([^”’])', r"\1\n\2", s)
    para = para.replace('"', '=')
    para = para.replace('n', '')
    para = para.replace('\\', '')
    para = para.replace('\'', '')
    para = para.replace(',', '')
    para = para.replace('。', 'p')
    a = re.findall("=.*p", para)
    for i in range(9584, 2):
        print(a[i])
        b[i] = a[i]
    for word in b:
        if word == "羽" or  word == "武圣" or word == "壮缪" or word == "云长":
                word = "关羽曰"
                dic[word] = dic.get(word, 0) + 1
        if word == "飞" or word == "益德" or word == "翼德":
            word = "张飞曰"
            dic[word] = dic.get(word, 0) + 1
        if word == "孙权" or word == "权":
            word = "孙权曰"
            dic[word] = dic.get(word, 0) + 1
        if word == "玄德" or word == "德" or word == "备" or word == "刘备":
            word = "刘备曰"
            dic[word] = dic.get(word, 0) + 1
        if word == "诸葛" or word == "孔明" or word == "亮" or word == "卧龙":
            word = "诸葛曰"
            dic[word] = dic.get(word, 0) + 1
        if word == "司马曰":
            word = "司马曰"
            dic[word] = dic.get(word, 0) + 1
```

