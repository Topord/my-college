# 数据库相关概念

## 数据库

数据的仓库，用于保存数据

## 表

在数据库中真正存储数据的地方，不同的数据保存到不同的表中，如：账户表，用户表，商品表，购物车表，订单表，物流表....

## 列

表由不同列组成，也叫字段，用户表：id、姓名、年龄、账号、密码、等级...

## 行

每一行数据也叫记录（元组）

## 常用数据库

- MySQL	开源的关系型数据库，Java开发用的最多
- Oracle     甲骨文数据库，产品免费，服务收费
- SQLServer  微软，Windows上的，.Net开发使用
- DB2          IBM的
- Access      桌面型的



# MySQL的使用

登录MySQL

```
mysql -u账号 -p
输入密码
```

查看所有数据库

```
show databases;
```

使用数据库

```
use 数据库名;
```

查看所有表

```
show tables;
```

查询表

```
select * from user;
```

# SQL语言

结构化查询语言 （Structured Query Language）

用于对数据库数据进行增删改查

分为：

- DDL   数据定义语言（建库建表，修改数据和表）
- DCL    数据控制语言（权限控制）
- DML   数据操作语言（增删改）
- DQL   数据查询语言（查询）

## DDL

创建数据库

```
create database 名字;
```

删除数据库

```
drop database 名字;
```

创建表

```
create table 表名
(
	字段名 类型 约束,
	字段名 类型 约束,
	...
)
```

字段名的命名规范：全部小写，单词之间用_分隔开，如：student_name

常用的数据类型：

	- int	整数
	- float 浮点数
	- double 双精度浮点数
	- byte 字节
	- bigint 大整数，相当长整型
	- char  固定长度的字符串  char(10)  存：hello + 5个空格
	- varchar 可变长度的字符串 varchar(10)  hello占5个长度
	- text 长文本 65535
	- decimal(p,d) 存储精确的数值 decimal(6,2) 存储6位数字，小数位数为2，-9999.99到9999.99

​	

约束，可以控制数据的安全性

主键 primary key	用于唯一标识一行数据，不能重复，不能为空

唯一  unique 该列不能重复

非空 not null 该列不能为空

外键 foregin key 用于引用其他表的数据



**商品信息表（goods）**

| 商品编号    | 商品名称      | 商品类型      | 商品产地  |
| ------- | --------- | --------- | ----- |
| goodsid | goodsname | goodstype | place |

**商品销售表（sale）**

| 商品编号    | 销售时间     | 进价      | 售价        | 剩余量   |
| ------- | -------- | ------- | --------- | ----- |
| goodsid | saletime | inprice | saleprice | stock |



```
-- 创建商品信息表（goods)
CREATE TABLE goods(
goodsid int PRIMARY KEY auto_increment,
goodsname VARCHAR(20) NOT NULL,
goodstype VARCHAR(20),
place VARCHAR(50)
);

-- 创建商品销售表（sale）
CREATE TABLE sale(
goodsid int NOT NULL,
saletime date NOT NULL,   
inprice double DEFAULT NULL,   
saleprice double DEFAULT NULL, 
stock int(11) DEFAULT NULL,  
PRIMARY KEY(goodsid,saletime),
FOREIGN KEY(goodsid) REFERENCES goods(goodsid)
);


```

删除表

```
drop table 表名;
drop table if exists 表名;
```



## DML 

### insert

```
insert into 表(列,列..) values(值,值..);
```

```
INSERT INTO goods(goodsid,goodsname,goodstype,place) VALUES (1, '飞利浦SP100净化器', '电器', '武汉');

INSERT INTO goods(goodsid,goodsname,goodstype,place) VALUES 
(2, '山东红富士苹果（一级果）', '水果', '山东'),
(3, '康师傅桶装方便面（红烧牛肉面）','零食', '杭州'),
(4, '格力NS-8823变频空调', '电器',  '珠海'),
(5, '泰国山竹特级', '水果', '泰国');


INSERT INTO sale VALUES
(1,20220311,20220314,500,1000,100),
(2,20220311,20220314,3.10,6.50,20),
(3,20220303,20220314,15,24,100),
(4,20220303,20220314,2000,3000,15),
(5,20220311,20220314,2.3,5,20);

```

注意：

1. 列中不用添加自动增长的列
2. 列的数量、类型、顺序要和值严格一致

### update

```
update 表 set 列 = 值,列 = 值... [where 条件]
```

```
UPDATE goods set place = '河南' where goodsid = 2;
```

### delete

```
delete from 表 [where 条件]
```

```
DELETE FROM sale  where goodsid = 5;
```

清空表

```
truncate table 表;
```



## DQL

查询

```
-- 查询所有行和列
SELECT * FROM goods;

-- 查询部分列
SELECT goodsid,goodsname FROM goods;

-- 给列加别名
SELECT goodsid 商品编号 FROM goods;

-- 查询编号为1的商品
SELECT * FROM goods WHERE goodsid = 1;

-- 查询编号不为1的商品信息 !=  <>
SELECT * FROM goods WHERE goodsid <> 1;

-- 查询剩余量大于20的商品
SELECT * FROM sale WHERE stock>20;

-- 查询所有苹果 模糊查询 like '%苹果%'    （‘%’ 任意长度 ，‘_’ 一个字） 李%，李_
SELECT * FROM goods WHERE goodsname LIKE '%苹果%';

-- 分组查询 group by 
SELECT * FROM goods GROUP BY goodstype;
 
！如果单独使用GROUP BY,查询结果只显示一个分组的一条记录

-- 按库存量排序 order by (asc默认，desc降序）
SELECT * FROM sale ORDER BY stock;
SELECT * FROM sale ORDER BY stock DESC;

-- 分页查询 limit
select * from 表名 limit m,n;  从m+1条记录开始检索，取出n条数据

  一页显示2个商品,分两页显示
SELECT * FROM sale limit 0,2;
SELECT * FROM sale limit 2,2;


-- 统计(聚合)函数 sum 求和、avg 平均值、max 最大值、min 最低值、count 数量
SELECT sum(stock) 库存总量,min(stock) 最小库存量,max(stock) 最大库存量, avg(stock) 平均库存量 FROM sale;
SELECT count(*) 商品总数 from sale;

-- 查询每种类别商品总数
SELECT count(*) 商品总数,goodstype 商品类别 FROM goods GROUP BY goodstype;

```



# E-R图



![img](D:\1.png)!![img](D:\2.png))



![](D:\3.png)

# 范式

![](D:\XQ.png)